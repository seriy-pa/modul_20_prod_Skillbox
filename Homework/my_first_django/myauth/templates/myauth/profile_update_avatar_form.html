{% extends "myauth/base.html" %}
[% load cache %}

{% block title %}
    About me
{% endblock %}

{% block body %}
    <h1>User info About me</h1>
    {% if user.is_authenticated %}
        <h2>Пользователь {{ user.username |capfirst }}</h2>
        {% if user.profile %}
            <table class="my-table">
                <thead>
                    <th>User id: {{ user.pk }}</th>
                    <th>Profile id: {{ user.profile.pk }}</th>
                </thead>
                <tbody>
                    <tr>
                        <td>
                                <p>Имя: {{ user.first_name }}</p>
                                <p>Фамилия: {{ user.last_name }}</p>
                                <p>E-mail: {{ user.email }}</p>
                                <p>Bio: {{ user.profile.bio }}</p>

                        </td>
                        <td>
                            {% if user.profile.avatar %}
                                <img src="{{ user.profile.avatar.url }}" alt="{{ user.profile.avatar.name }}">
                            {% else %}
                                <div>No avatar</div>
                            {% endif %}
                        </td>
                    </tr>
                </tbody>
            </table>
            <br>
                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    {{ form.as_p }}
                    <button type="submit" value="Обновить аватар"></button>
                </form>
        {% else %}
            <p>Username: {{ user.username }}</p>
            <p>First name: {{ user.first_name }}</p>
            <p>Last name: {{ user.last_name }}</p>
            <p>E-mail: {{ user.email }}</p>
            <div>
                <p>Доп информация отсутствует</p>
            </div>
        {% endif %}

    {% else %}
        <h2>User is anonymous</h2>
    {% endif %}
{% endblock %}
